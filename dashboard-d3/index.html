<!DOCTYPE html>
<html lang='en'>
	<head>
		<meta charset='utf-8'>
		<title>Stacks</title>
		<script type='text/javascript' src='stacks.js'></script>
		<script type='text/javascript' src='d3.js'></script>
	</head>

	<style>

		path:hover {  opacity:0.9; }
		rect:hover {  opacity:0.9; }
		.axis {  font: 10px sans-serif; }
		.legend tr{    border-bottom:1px solid grey; }
		.legend tr:first-child{    border-top:1px solid grey; }

		.axis path,
		.axis line {
		  fill: none;
		  stroke: #000;
		  shape-rendering: crispEdges;
		}

		.x.axis path {  display: none; }
		.legend{
		    margin-bottom:76px;
		    display:inline-block;
		    border-collapse: collapse;
		    border-spacing: 0px;
		}
		.legend td{
		    padding:4px 5px;
		    vertical-align:bottom;
		}
		.legendFreq, .legendPerc{
		    align:right;
		    width:50px;
		}
		div.b {
		  text-align: center;
		}

		input[type=checkbox] {
		  transform: scale(1.5);
		}.checkboxtext {
		  /* Checkbox text */
		  font-size: 120%;
		  display: inline;
		}

	</style>

	<body>

		<div class="b">
		<h3>Classification Probabilities</h3></div>

		<div id="area1" class="b"></div>

  		<input type="checkbox" class="myCheckbox" value="Watch" id="Watch" checked="checked"/> <span class="checkboxtext">Apple Watch Data</span>
  		<input type="checkbox" class="myCheckbox" value="Myo" id="Myo" checked="checked"/> <span class="checkboxtext">Myo Data</span>
  		<input type="checkbox" class="myCheckbox" value="Video" id="Video" checked="checked"/> <span class="checkboxtext">Video Data</span>

		<div class="b">
		<h3>Incorrect Classification Breakdown</h3></div>

		<div id="area2" class="b"></div>

		<script>

			d3.csv('cifar10_acc.csv')
			  .then(function(p_data)  {
				  predictions_data = p_data;
			  })
			d3.csv('cifar10_scores.csv')
			  .then(function(s_data)  {
				  scores_data = s_data;
			  })
			.then(plot_it)

			d3.selectAll(".myCheckbox").on("change", function replot() {

				var choices = []
                var checkboxes = document.querySelectorAll('input[type=checkbox]:checked')

                var text = g.selectAll("#area1");
                text.attr("class", "update");
                text.enter().append("text")
				      .attr("class", "enter")
				    .merge(text)
				      .text(function(d) { return d; });
				text.exit().remove();

				d3.csv('accuracy.csv')
				  .then(function(p_data)  {
					  predictions_data = p_data;
				  })
				d3.csv('probabilities.csv')
				  .then(function(s_data)  {
					  scores_data = s_data;
				  })
				.then(plot_it)

				// When checkbox changes, refresh choices array with checked values
                for (var i = 0; i < checkboxes.length; i++) {
                    choices.push(encodeURIComponent(checkboxes[i].value))
                }

			});

			// d3.selectAll('.myCheckbox').property('checked', "checked")

		</script>

	</body>
</html>
